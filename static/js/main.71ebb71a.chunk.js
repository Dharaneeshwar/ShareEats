(this["webpackJsonpshare-eat"]=this["webpackJsonpshare-eat"]||[]).push([[0],{40:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(7),c=a.n(n),r=a(33),s=a.n(r),o=a(25),i=a(12),l=a(11),u=(a(40),a(34)),j=a(27),b=a(13),d=Object(u.a)({apiKey:"AIzaSyDmCKt-m-DwXY6AM5kojNx8DvZ4Fs--cP8",authDomain:"share-eats.firebaseapp.com",projectId:"share-eats",storageBucket:"share-eats.appspot.com",messagingSenderId:"776133909574",appId:"1:776133909574:web:9f42d3e036497f12c27e47"}),m=Object(j.b)(d),f=Object(b.d)(d),h=a(5);var O=function(e){var t=Object(i.g)();return Object(h.jsx)("div",{children:Object(h.jsxs)("nav",{className:"container navbar navbar-expand-lg navbar-light bg-white pt-2",children:[Object(h.jsx)("h3",{className:"font m-2 m-md-0",children:"Share Eats"}),Object(h.jsx)("div",{className:"collapse navbar-collapse d-none d-lg-block",id:"navbarText",children:Object(h.jsxs)("ul",{className:"navbar-nav mx-auto mt-2",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("a",{className:"nav-link "+("donor"==e.activeNav?"active":""),onClick:function(){return t("/donors")},children:"Donate"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("a",{className:"nav-link "+("receiver"==e.activeNav?"active":""),onClick:function(){return t("/receivers")},children:"Need Food"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("a",{className:"nav-link "+("logs"==e.activeNav?"active":""),onClick:function(){return t("/logs")},children:"Logs"})})]})}),Object(h.jsx)("span",{className:"navbar-text litle-bigger",children:Object(h.jsx)("div",{onClick:function(){m.signOut(),localStorage.removeItem("uid"),localStorage.removeItem("authObj"),t("/")},className:"btn btn-darkblue btn-lg",children:"Sign out"})})]})})};function x(){return Object(h.jsx)("div",{className:"mt-5 pt-3"})}var p=function(e){var t=e.activeNav,a=void 0===t?"receiver":t,n=e.children;return Object(h.jsxs)("div",{children:[Object(h.jsx)(O,{activeNav:a}),n,Object(h.jsx)(x,{})]})};function v(e){var t=c.a.useState("donors"),a=Object(l.a)(t,2),r=a[0],s=a[1],o=c.a.useState(!1),u=Object(l.a)(o,2),b=u[0],d=u[1];Object(n.useEffect)((function(){}),[]);return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{className:"text-center",style:{marginTop:"275px"},children:"Share Eats"}),Object(h.jsx)("p",{className:"text-center litle-bigger mt-3",children:"Keeping Food-redistribution at our core."}),Object(h.jsxs)("button",{onClick:function(){var e=new j.a;Object(j.c)(m,e).then((function(e){var t;t=e.user,console.log(t),localStorage.setItem("uid",t.uid),localStorage.setItem("authObj",JSON.stringify(t)),s("donors"),d(!0)})).catch((function(e){console.log(e)}))},style:{marginTop:"100px"},className:"d-block btn btn-darkblue mx-auto pr-2",children:[Object(h.jsx)("i",{class:"fab fa-google mx-1"})," Sign in with Google"]}),b&&Object(h.jsx)(i.a,{to:r})]})}var g=a(0),N=a.n(g),y=a(1),k=(a(44),function(e){var t=6e4,a=36e5,n=e-new Date,c=Math.floor(n%864e5/a),r=Math.floor(n%a/t),s=Math.floor(n%t/1e3);return c>0?"".concat(c," hours and ").concat(r," minutes"):r>0?"".concat(r," minutes"):s>0?"less than a minute":void 0});function w(e){var t=Math.floor((new Date-e)/1e3),a=t/31536e3;return a>1?Math.floor(a)+" years":(a=t/2592e3)>1?Math.floor(a)+" months":(a=t/86400)>1?Math.floor(a)+" days":(a=t/3600)>1?Math.floor(a)+" hours":(a=t/60)>1?Math.floor(a)+" minutes":Math.floor(t)+" seconds"}var S=[],D=0,C=0,I=0,T=0;var M=function(){var e=Object(y.a)(N.a.mark((function e(){var t,a=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:"donar",navigator.geolocation.getCurrentPosition((function(e){var t=37.893995-e.coords.latitude,a=e.coords.longitude-66.804471;console.log(e.coords.latitude,t,t/.04521858664,t%.04521858664),console.log(e.coords.longitude,a,a/.04521858664,a%.04521858664),D=Math.floor(t/.04521858664),C=Math.floor(a/.04491515527),I=Math.floor(t/.2260929332),T=Math.floor(a/.22457577635)})),t=new Promise((function(e,t){setTimeout(Object(y.a)(N.a.mark((function t(){var a,n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],console.log(D,C),n=Object(b.e)(Object(b.a)(f,"posts"),Object(b.h)("latitudeFor5","==",D),Object(b.h)("longitudeFor5","==",C)),t.next=5,Object(b.c)(n);case 5:t.sent.forEach((function(e){var t=e.data();console.log("data ",t),t.key=e.id,a.push(t),S.push(t)})),console.log("posts there... ",a),e(a);case 9:case"end":return t.stop()}}),t)}))),1e3)})),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(y.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],n=Object(b.e)(Object(b.a)(f,"posts"),Object(b.h)("userid","==",t)),e.next=4,Object(b.c)(n);case 4:return e.sent.forEach((function(e){var t=e.data();t.key=e.id,a.push(t)})),console.log("get posts",a),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(y.a)(N.a.mark((function e(t,a){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("q ",t,a),Object(b.g)(Object(b.b)(f,"posts",t),{quantityleft:a});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),q=function(){var e=Object(y.a)(N.a.mark((function e(t,a,n){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=new Date,console.log("claimed"),"claimed"===t?Object(b.f)(Object(b.b)(f,"logs",(new Date).toISOString()),{message:"".concat(n," has claimed ").concat(a," plates."),type:"claim",notificationType:"mini",time:c.toISOString()}):Object(b.f)(Object(b.b)(f,"logs",(new Date).toISOString()),{message:"".concat(n," has claimed ").concat(a," plates."),type:"claim",notificationType:"highlight",time:c.toISOString()});case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();function P(e){console.log(e);var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(!0),o=Object(l.a)(s,2),i=(o[0],o[1]),u=Object(n.useState)(e.item.quantityleft),j=Object(l.a)(u,2),b=j[0],d=j[1],m=Object(n.useState)(0),f=Object(l.a)(m,2),O=f[0],x=f[1],p=Object(n.useState)(!1),v=Object(l.a)(p,2),g=v[0],S=v[1];function D(){return(D=Object(y.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(0),t.next=3,E(e.item.id,0);case 3:q("claimed",b,JSON.parse(localStorage.getItem("authObj")).displayName);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(){return(C=Object(y.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),d(b-O),t.next=4,E(e.item.id,b-O);case 4:q(!1,O),q("claimedfully",O,JSON.parse(localStorage.getItem("authObj")).displayName);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){(e.item.quantity!=e.item.quantityleft||e.item.freshTill.toDate()<new Date)&&i(!1)}),[]),Object(h.jsx)("div",{children:(b>0||"donor"==e.page)&&Object(h.jsxs)("div",{className:"border-bottom py-2",children:[Object(h.jsxs)("div",{className:"d-flex w-100 justify-content-between",children:[Object(h.jsx)("h3",{className:"mb-1",children:e.item.title}),Object(h.jsxs)("h3",{className:"mb-1",children:[b," ",Object(h.jsx)("i",{className:"fas fa-users"})]})]}),"veg"==e.item.foodType&&Object(h.jsx)("span",{className:"badge bg-green",style:{marginRight:".7rem"},children:"Veg"}),"nveg"==e.item.foodType&&Object(h.jsx)("span",{className:"badge bg-red",style:{marginRight:".7rem"},children:"Non-Veg"}),"deliver"==e.item.delivery&&Object(h.jsx)("span",{className:"badge bg-primary",style:{marginRight:".7rem"},children:"Delivery Available"}),"pickup"==e.item.delivery&&Object(h.jsx)("span",{className:"badge bg-primary",style:{marginRight:".7rem"},children:"Pick-up"}),Object(h.jsx)("br",{}),Object(h.jsx)("p",{className:"mt-3 noselect link",onClick:function(){return r(!c)},children:c?Object(h.jsxs)("p",{children:["Hide Details ",Object(h.jsx)("i",{className:"fas fa-angle-up px-1"})]}):Object(h.jsxs)("p",{children:["Show Details ",Object(h.jsx)("i",{className:"fas fa-angle-down px-1"})]})}),c&&Object(h.jsxs)("div",{children:[Object(h.jsx)("h4",{children:"Address"}),Object(h.jsx)("address",{children:e.item.address})]}),g&&Object(h.jsxs)("div",{className:"row my-3",children:[Object(h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:Object(h.jsx)("input",{type:"text",onChange:function(e){return x(e.target.value)},className:" form-control",placeholder:"Number of plates?"})}),Object(h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:Object(h.jsx)("button",{onClick:function(){return C.apply(this,arguments)},className:"btn btn-darkblue",children:"Submit"})})]}),"receive"==e.page&&Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{onClick:function(){return D.apply(this,arguments)},className:"btn btn-darkblue btn-sm ' + ".concat(!(e.item.freshTill.toDate()>new Date&&e.item.quantityleft>0)&&"disabled"),children:"Claim Completely"}),Object(h.jsx)("button",{onClick:function(){S(!g)},className:"btn btn-outline-darkblue btn-sm mx-2 ' + ".concat(!(e.item.freshTill.toDate()>new Date&&e.item.quantityleft>0)&&"disabled"),children:"Claim Partial Food"})]}),Object(h.jsxs)("div",{className:"d-flex w-100 justify-content-between",children:[e.item.freshTill.toDate()>new Date&&e.item.quantityleft>0&&Object(h.jsxs)("p",{className:"d-block mt-2 text-darkblue",children:["Food fresh for ",Object(h.jsx)("b",{children:k(e.item.freshTill.toDate())})]}),e.item.freshTill.toDate()<new Date&&e.item.quantityleft>0&&Object(h.jsx)("b",{className:"d-block mt-2 text-red",children:"Food Expired"}),0==e.item.quantityleft&&Object(h.jsx)("b",{className:"d-block mt-2 text-red",children:"Food Claimed"}),Object(h.jsxs)("p",{className:"d-block mt-2 text-darkblue",children:[w(e.item.createdAt.toDate())," ago"]})]})]})})}function A(){var e=Object(i.g)(),t=c.a.useState(""),a=Object(l.a)(t,2),n=a[0],r=a[1],s=c.a.useState("veg"),o=Object(l.a)(s,2),u=o[0],j=o[1],d=c.a.useState(""),O=Object(l.a)(d,2),x=O[0],p=O[1],v=c.a.useState(""),g=Object(l.a)(v,2),N=g[0],y=g[1],k=c.a.useState(""),w=Object(l.a)(k,2),S=w[0],M=w[1],F=c.a.useState("deliver"),E=Object(l.a)(F,2),q=E[0],P=E[1];return Object(h.jsxs)("div",{className:"mx-auto round-c bg-lightblue px-4 py-3",children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("h3",{className:"text-center",children:"Share Food"}),Object(h.jsx)("label",{className:"text-darkblue py-1 font",children:"Your Name:"}),Object(h.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return r(e.target.value)},name:"name"}),Object(h.jsx)("small",{children:"Your name or Organisation name."}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{className:"text-darkblue py-2 font",children:"Food Type:"}),Object(h.jsxs)("select",{id:"type",onChange:function(e){return j(e.target.value)},className:"form-select",children:[Object(h.jsx)("option",{value:"veg",selected:!0,children:"Veg"}),Object(h.jsx)("option",{value:"nveg",children:"Non-Veg"})]}),Object(h.jsx)("label",{class:!0,Name:"text-darkblue py-2 font",children:"Quantity of food: (No. of People)"}),Object(h.jsx)("input",{id:"quantity",type:"number",onChange:function(e){return p(e.target.value)},className:"form-control",name:"quantity"}),Object(h.jsx)("small",{children:"Number of persons that can be fed"}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{className:"text-darkblue py-2 font",children:"Fresh For:"}),Object(h.jsx)("input",{id:"freshfor",type:"number",onChange:function(e){return y(e.target.value)},className:"form-control",name:"freshfor"}),Object(h.jsx)("small",{children:"Enter the number in hours."}),Object(h.jsx)("br",{})]}),Object(h.jsxs)("div",{className:"form-group py-2",children:[Object(h.jsx)("label",{for:"location",className:"text-darkblue font py-2",children:"Address"}),Object(h.jsx)("textarea",{id:"address",onChange:function(e){return M(e.target.value)},className:"form-control font",name:"message",rows:"5"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"text-darkblue font py-2",children:"Delivery:"}),Object(h.jsxs)("select",{id:"delivery",onChange:function(e){return P(e.target.value)},className:"form-select",children:[Object(h.jsx)("option",{value:"pickup",children:"Pickup"}),Object(h.jsx)("option",{value:"deliver",selected:!0,children:"I will deliver myself"})]})]}),Object(h.jsx)("button",{onClick:function(t){!function(e,t,a,n,c,r,s){navigator.geolocation.getCurrentPosition((function(e){var t=37.893995-e.coords.latitude,a=e.coords.longitude-66.804471;D=Math.floor(t/.04521858664),C=Math.floor(a/.04491515527),I=Math.floor(t/.2260929332),T=Math.floor(a/.22457577635)})),setTimeout((function(){var o=new Date,i=new Date;i.setHours(i.getHours()+parseInt(n)),Object(b.f)(Object(b.b)(f,"posts",o.toISOString()),{userid:s,title:e,foodType:t,quantity:a,quantityleft:a,freshTill:i,address:c,delivery:r,createdAt:o,latitudeFor5:D,latitudeFor25:I,longitudeFor5:C,longitudeFor25:T,id:o.toISOString()}),Object(b.f)(Object(b.b)(f,"logs",o.toISOString()),{message:"Food is available for ".concat(a," people."),type:"add",notificationType:"mini",time:o.toISOString()})}),500),console.log("added")}(n,u,x,N,S,q,m.currentUser.uid),e("/receivers")},className:"btn btn-darkblue my-3",children:"Post Availability"})]})}function J(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1];return console.log("content",m.currentUser),Object(n.useEffect)((function(){Object(y.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("auth",m,m.currentUser),e.next=3,F(m.currentUser?m.currentUser.uid:localStorage.getItem("uid"));case 3:t=e.sent,c(t.reverse());case 5:case"end":return e.stop()}}),e)})))()}),[]),Object(h.jsx)(p,{activeNav:"donor",children:Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"row gx-5",children:[Object(h.jsxs)("div",{className:"col-md-8",children:[Object(h.jsx)("h2",{children:"My posts"}),a.map((function(e,t){return Object(h.jsx)(P,{page:"donor",index:t,item:e})}))]}),Object(h.jsx)("div",{className:"col-md-4 form-box",children:Object(h.jsx)(A,{})})]})})})}a(45);function U(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){Object(y.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("receive");case 2:t=e.sent,console.log("hey before",t),c(t.reverse()),console.log("hey",t);case 6:case"end":return e.stop()}}),e)})))()}),[]),Object(h.jsx)(p,{activeNav:"receiver",children:Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"row justify-content-center",children:Object(h.jsxs)("div",{className:"col-md-8",children:[Object(h.jsx)("h2",{className:"text-center",children:"Food Available"}),a.map((function(e,t){return Object(h.jsx)(P,{page:"receive",item:e},t)})),Object(h.jsx)("h3",{className:"mt-5 text-center",children:"More Food"}),a.map((function(e,t){return Object(h.jsx)(P,{page:"receive",item:e},t)}))]})})})})}var R=function(){var e=Object(y.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise((function(e,t){setTimeout(Object(y.a)(N.a.mark((function t(){var a,n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],n=Object(b.e)(Object(b.a)(f,"logs")),t.next=4,Object(b.c)(n);case 4:t.sent.forEach((function(e){var t=e.data();t.key=e.id,a.push(t)})),e(a);case 7:case"end":return t.stop()}}),t)}))),100)})),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var V=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){r(e.message)})),Object(h.jsx)("div",{className:"container py-3 px-3 rounded border border-darkblue bg-darkblue text-center text-white my-4",children:c})};var H=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){r(e.message)})),Object(h.jsx)("div",{className:"container py-3 px-3 rounded border border-darkblue bg-lightblue my-4 text-center",children:c})};function K(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){Object(y.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:(t=e.sent)&&(c(t.reverse()),console.log(t));case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(h.jsx)(p,{activeNav:"logs",children:Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"row justify-content-center",children:Object(h.jsxs)("div",{className:"col-md-8",children:[Object(h.jsxs)("p",{className:"text-center my-5",children:[Object(h.jsx)("b",{children:"Logs"})," are the list of interations and ",Object(h.jsx)("b",{children:"transactions"})," made by the users."]}),a.map((function(e,t){return"mini"===e.notificationType&&Object(h.jsx)(H,{page:"donor",index:t,message:e.message})||"highlight"===e.notificationType&&Object(h.jsx)(V,{page:"donor",index:t,message:e.message})}))]})})})})}var Y=function(){return Object(h.jsx)(o.a,{children:Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{path:"/",exact:!0,element:Object(h.jsx)(v,{})}),Object(h.jsx)(i.b,{path:"/donors",element:Object(h.jsx)(J,{})}),Object(h.jsx)(i.b,{path:"/receivers",element:Object(h.jsx)(U,{})}),Object(h.jsx)(i.b,{path:"/logs",element:Object(h.jsx)(K,{})})]})})};a(46);s.a.render(Object(h.jsx)(Y,{}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.71ebb71a.chunk.js.map